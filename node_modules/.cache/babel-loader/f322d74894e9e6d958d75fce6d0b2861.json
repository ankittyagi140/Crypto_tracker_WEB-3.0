{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/ankit/OneDrive/Desktop/crypto_tracker/crypto_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ankit/OneDrive/Desktop/crypto_tracker/crypto_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\ankit\\\\OneDrive\\\\Desktop\\\\crypto_tracker\\\\crypto_tracker\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{CircularProgress}from\"@mui/material\";import\"./CoinChart.css\";import{useContext,useEffect,useState}from\"react\";import{HistoricalChart}from\"../../Config/api\";import{CryptoState}from\"../../CryptoContext/CryptoContext\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import{Line}from\"react-chartjs-2\";import{Chart}from\"chart.js/auto\";import{borderColor}from\"@mui/system\";import{ChartDays}from\"../../Config/Data\";import SelectedButton from\"../../Components/SelectedButton/SelectedButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CoinChart=function CoinChart(){var _useParams=useParams(),id=_useParams.id;var _useContext=useContext(CryptoState),currency=_useContext.currency,symbol=_useContext.symbol;var _useState=useState(),_useState2=_slicedToArray(_useState,2),coinChart=_useState2[0],setCoinChart=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),day=_useState4[0],setDay=_useState4[1];var fetchCoinChart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Promise,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return new Promise(function(res){setTimeout(function(){res(axios.get(HistoricalChart(id,day,currency)));},1);});case 3:_yield$Promise=_context.sent;data=_yield$Promise.data;setCoinChart(data.prices);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchCoinChart(){return _ref.apply(this,arguments);};}();console.log(coinChart);useEffect(function(){fetchCoinChart();},[currency,day]);return/*#__PURE__*/_jsx(\"div\",{className:\"coin_chart\",children:!coinChart?/*#__PURE__*/_jsx(CircularProgress,{style:{color:\"gold\"}}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Line,{data:{labels:coinChart.map(function(coin){var date=new Date(coin[0]);var time=date.getHours()>12?\"\".concat(date.getHours()-12,\":\").concat(date.getMinutes(),\"AM\"):\"\".concat(date.getHours(),\":\").concat(date.getMinutes(),\" PM\");return day===1?time:date.toLocaleDateString();}),datasets:[{data:coinChart.map(function(coin){return coin[1];}),label:\"Price (Past \".concat(day,\" Days) in \").concat(currency),borderColor:\"#EEBC1D\"}],options:{responsive:true}}}),/*#__PURE__*/_jsx(\"div\",{className:\"chart_bg\",children:ChartDays.map(function(day){return/*#__PURE__*/_jsx(SelectedButton,{onClick:function onClick(){setDay(day.value);},selected:day.value===day,children:day.label},day.value);})})]})});};export default CoinChart;","map":{"version":3,"sources":["C:/Users/ankit/OneDrive/Desktop/crypto_tracker/crypto_tracker/src/Components/CoinChart/CoinChart.jsx"],"names":["CircularProgress","useContext","useEffect","useState","HistoricalChart","CryptoState","axios","useParams","Line","Chart","borderColor","ChartDays","SelectedButton","CoinChart","id","currency","symbol","coinChart","setCoinChart","day","setDay","fetchCoinChart","Promise","res","setTimeout","get","data","prices","console","error","log","color","labels","map","coin","date","Date","time","getHours","getMinutes","toLocaleDateString","datasets","label","options","responsive","value"],"mappings":"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","sourcesContent":["import { CircularProgress } from \"@mui/material\";\r\nimport \"./CoinChart.css\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { HistoricalChart } from \"../../Config/api\";\r\nimport { CryptoState } from \"../../CryptoContext/CryptoContext\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Chart } from \"chart.js/auto\";\r\nimport { borderColor } from \"@mui/system\";\r\nimport { ChartDays } from \"../../Config/Data\";\r\nimport SelectedButton from \"../../Components/SelectedButton/SelectedButton\";\r\n\r\nconst CoinChart = () => {\r\n  const { id } = useParams();\r\n  const { currency, symbol } = useContext(CryptoState);\r\n  const [coinChart, setCoinChart] = useState();\r\n  const [day, setDay] = useState(1);\r\n\r\n  const fetchCoinChart = async () => {\r\n    try {\r\n      const { data } = await new Promise((res) => {\r\n        setTimeout(() => {\r\n          res(axios.get(HistoricalChart(id, day, currency)));\r\n        }, 1);\r\n      });\r\n      setCoinChart(data.prices);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n  console.log(coinChart);\r\n\r\n  useEffect(() => {\r\n    fetchCoinChart();\r\n  }, [currency, day]);\r\n\r\n  return (\r\n    <div className=\"coin_chart\">\r\n      {!coinChart ? (\r\n        <CircularProgress style={{ color: \"gold\" }}></CircularProgress>\r\n      ) : (\r\n        <>\r\n          <Line\r\n            data={{\r\n              labels: coinChart.map((coin) => {\r\n                let date = new Date(coin[0]);\r\n                let time =\r\n                  date.getHours() > 12\r\n                    ? `${date.getHours() - 12}:${date.getMinutes()}AM`\r\n                    : `${date.getHours()}:${date.getMinutes()} PM`;\r\n                return day === 1 ? time : date.toLocaleDateString();\r\n              }),\r\n              datasets: [\r\n                {\r\n                  data: coinChart.map((coin) => coin[1]),\r\n                  label: `Price (Past ${day} Days) in ${currency}`,\r\n                  borderColor: \"#EEBC1D\",\r\n                },\r\n              ],\r\n              options: {\r\n                responsive: true,\r\n              },\r\n            }}\r\n          />\r\n          <div className=\"chart_bg\">\r\n            {ChartDays.map((day) => {\r\n              return (\r\n                <SelectedButton\r\n                  key={day.value}\r\n                  onClick={() => {\r\n                    setDay(day.value);\r\n                  }}\r\n                  selected={day.value === day}\r\n                >\r\n                  {day.label}\r\n                </SelectedButton>\r\n              );\r\n            })}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default CoinChart;\r\n"]},"metadata":{},"sourceType":"module"}